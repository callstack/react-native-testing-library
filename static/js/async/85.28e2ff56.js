"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["85"],{7924(e,s,r){r.r(s),r.d(s,{default:()=>a});var n=r(4848),i=r(8453),o=r(8703);function t(e){let s={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",span:"span",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.h1,{id:"migration-to-9x",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#migration-to-9x",children:"#"}),"Migration to 9.x"]}),"\n",(0,n.jsxs)(s.p,{children:["Version 7.0 brought React Native Testing Library into the ",(0,n.jsx)(s.code,{children:"@testing-library"})," family. Since it has been implemented independently from its web counterpart – the React Testing Library – there are some differences in the API and behavior. Version 9.0 solves several of these problems."]}),"\n",(0,n.jsxs)(s.h2,{id:"support-for-text-match-options-aka-string-precision-api",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#support-for-text-match-options-aka-string-precision-api",children:"#"}),"Support for text match options a.k.a string precision API"]}),"\n",(0,n.jsx)(s.p,{children:"This is a backward compatible change."}),"\n",(0,n.jsxs)(s.p,{children:["When querying text, it is now possible to pass a ",(0,n.jsx)(s.a,{href:"/docs/api/queries.html#textmatch",children:(0,n.jsx)(s.code,{children:"TextMatch"})})," to most text based queries, which lets you configure how ",(0,n.jsx)(s.code,{children:"@testing-library/react-native"})," should match your text. For instance, passing ",(0,n.jsx)(s.code,{children:"exact: false"})," will allow matching substrings and will ignore case:"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"jsx",children:(0,n.jsxs)(s.code,{children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"getByText"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" render"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">Hello World</"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">);"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getByText"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Hello World'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"); "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Matches"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getByText"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Hello'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"); "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Doesn't match"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getByText"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'hello'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { exact"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" false"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" }); "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ignore case-sensitivity and does partial matching"})]})]})})}),"\n",(0,n.jsxs)(s.p,{children:["Please note that the ",(0,n.jsx)(s.code,{children:"findBy*"})," queries used to take a ",(0,n.jsx)(s.code,{children:"waitForOptions"})," parameter as a second argument, which has now been moved to the third argument:"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"diff",children:(0,n.jsxs)(s.code,{children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-deleted)"},children:"-findByText('Hello world', { timeout: 3000 }); // old findBy* API"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-inserted)"},children:"+findByText('Hello world', {}, { timeout: 3000 }); // new findBy* API"})})]})})}),"\n",(0,n.jsxs)(s.p,{children:["For backward compatibility RNTL v9 can still read ",(0,n.jsx)(s.code,{children:"waitForOptions"})," from the second argument but will print a deprecation warning."]}),"\n",(0,n.jsxs)(s.h2,{id:"reverted-matching-text-across-several-nodes",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#reverted-matching-text-across-several-nodes",children:"#"}),"Reverted matching text across several nodes"]}),"\n",(0,n.jsx)(o.Pq,{type:"caution",title:"Caution",children:(0,n.jsx)(s.p,{children:"\nThis is a breaking change."})}),"\n",(0,n.jsx)(s.p,{children:"In v1.14 we've introduced a feature allowing to match text when it's spread across several nodes:"}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,n.jsxs)(s.code,{children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"getByText"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" render"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    Hello <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">world</"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  </"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:");"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getByText"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Hello world'"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"); "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// matches"})]})]})})}),"\n",(0,n.jsx)(s.p,{children:"However this behavior was different than the web one, and wouldn't always be straightforward to reason about. For instance it could match text nodes far from each other on the screen. It also prevented us from implementing the string precision API. From v9, this type of match will not work."}),"\n",(0,n.jsxs)(s.p,{children:["A work around is to use ",(0,n.jsx)(s.code,{children:"within"}),":"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,n.jsxs)(s.code,{children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { Text } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" 'react-native'"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { render"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" within } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" '@testing-library/react-native'"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" { "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"getByText"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" render"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">Hello <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">world</Text</"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">)"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"within(getByText('Hello', {exact: "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"false"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"})).getByText('world')"})]})]})})}),"\n",(0,n.jsxs)(s.h2,{id:"future-plans",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#future-plans",children:"#"}),"Future plans"]}),"\n",(0,n.jsx)(s.p,{children:"This release changes a lot of internal logic in the library, enabling more improvements to bring us closer to our web counterpart, with better support for accessibility queries."}),"\n",(0,n.jsxs)(s.p,{children:["We're also ",(0,n.jsx)(s.a,{href:"https://github.com/callstack/react-native-testing-library/issues/877",rel:"noopener noreferrer",target:"_blank",children:"migrating the codebase to TypeScript"}),". Please let us know if you're interested in helping us with this effort."]}),"\n",(0,n.jsx)(s.p,{children:"Stay safe!"})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(t,{...e})}):t(e)}a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["13.x%2Fdocs%2Fmigration%2Fprevious%2Fv9.mdx"]={toc:[{id:"support-for-text-match-options-aka-string-precision-api",text:"Support for text match options a.k.a string precision API",depth:2},{id:"reverted-matching-text-across-several-nodes",text:"Reverted matching text across several nodes",depth:2},{id:"future-plans",text:"Future plans",depth:2}],title:"Migration to 9.x",headingTitle:"Migration to 9.x",frontmatter:{}}}}]);