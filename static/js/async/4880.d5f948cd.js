"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["4880"],{1310:function(e,n,r){r.r(n),r.d(n,{default:()=>a});var s=r(5893),t=r(65);function i(e){let n=Object.assign({h1:"h1",code:"code",a:"a",pre:"pre",p:"p",h3:"h3",h4:"h4",div:"div"},(0,t.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"screen-object",children:[(0,s.jsx)(n.code,{children:"screen"})," object",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#screen-object",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"let screen: {\n  ...queries;\n  rerender(element: React.Element<unknown>): Promise<void>;\n  unmount(): Promise<void>;\n  debug(options?: DebugOptions): void\n  toJSON(): JsonElement | null;\n  container: HostElement;\n  root: HostElement | null;\n};\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"screen"})," object offers a recommended way to access queries and utilities for the currently rendered UI."]}),"\n",(0,s.jsxs)(n.p,{children:["This object is assigned after the ",(0,s.jsx)(n.code,{children:"render"})," call and cleared after each test by calling ",(0,s.jsx)(n.a,{href:"/docs/api/misc/other#cleanup",children:(0,s.jsx)(n.code,{children:"cleanup"})}),". If no ",(0,s.jsx)(n.code,{children:"render"})," call has been made in a given test, then it holds a special object and throws a helpful error on each property and method access."]}),"\n",(0,s.jsxs)(n.h3,{id:"queries",children:[(0,s.jsx)(n.code,{children:"...queries"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#queries",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["The most important feature of ",(0,s.jsx)(n.code,{children:"screen"})," is providing a set of helpful queries that allow you to find certain elements in the view hierarchy."]}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.a,{href:"/docs/api/queries",children:"Queries"})," for a complete list."]}),"\n",(0,s.jsxs)(n.h4,{id:"example",children:["Example",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#example",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"import { render, screen } from '@testing-library/react-native';\n\ntest('example', async () => {\n  await render(<MyComponent />);\n  const buttonStart = screen.getByRole('button', { name: 'start' });\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"rerender",children:[(0,s.jsx)(n.code,{children:"rerender"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#rerender",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function rerender(element: React.Element<unknown>): Promise<void>;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Re-render the in-memory tree with a new root element. This simulates a React update render at the root. If the new element has the same type (and ",(0,s.jsx)(n.code,{children:"key"}),") as the previous element, the tree will be updated; otherwise, it will re-mount a new tree, in both cases triggering the appropriate lifecycle events."]}),"\n",(0,s.jsxs)(n.p,{children:["This method is async and uses async ",(0,s.jsx)(n.code,{children:"act"})," function internally to ensure all pending React updates are executed during updating, making it compatible with async React features like ",(0,s.jsx)(n.code,{children:"Suspense"})," boundary or ",(0,s.jsx)(n.code,{children:"use()"})," hook."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"import { render, screen } from '@testing-library/react-native';\n\ntest('async rerender test', async () => {\n  await render(<MyComponent initialData=\"first\" />);\n\n  await screen.rerender(<MyComponent initialData=\"updated\" />);\n  expect(screen.getByText('updated')).toBeOnTheScreen();\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"unmount",children:[(0,s.jsx)(n.code,{children:"unmount"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#unmount",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function unmount(): Promise<void>;\n"})}),"\n",(0,s.jsx)(n.p,{children:"Unmount the in-memory tree, triggering the appropriate lifecycle events."}),"\n",(0,s.jsxs)(n.p,{children:["This method is async and uses async ",(0,s.jsx)(n.code,{children:"act"})," function internally to ensure all pending React updates are executed during unmounting, making it compatible with async React features like ",(0,s.jsx)(n.code,{children:"Suspense"})," boundary or ",(0,s.jsx)(n.code,{children:"use()"})," hook."]}),"\n",(0,s.jsxs)(n.div,{className:"rspress-directive note",children:[(0,s.jsx)(n.div,{className:"rspress-directive-title",children:"NOTE"}),(0,s.jsxs)(n.div,{className:"rspress-directive-content",children:["\n",(0,s.jsxs)(n.p,{children:["Usually you should not need to call ",(0,s.jsx)(n.code,{children:"unmount"})," as it is done automatically if your test runner supports ",(0,s.jsx)(n.code,{children:"afterEach"})," hook (like Jest, mocha, Jasmine)."]}),"\n"]})]}),"\n",(0,s.jsxs)(n.h3,{id:"debug",children:[(0,s.jsx)(n.code,{children:"debug"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#debug",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function debug(options?: { message?: string; mapProps?: MapPropsFunction }): void;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Pretty prints deeply rendered component passed to ",(0,s.jsx)(n.code,{children:"render"}),"."]}),"\n",(0,s.jsxs)(n.h4,{id:"debug-message-option",children:[(0,s.jsx)(n.code,{children:"message"})," option",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#debug-message-option",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"You can provide a message that will be printed on top."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"await render(<Component />);\nscreen.debug({ message: 'optional message' });\n"})}),"\n",(0,s.jsx)(n.p,{children:"logs optional message and colored JSX:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"optional message\n\n<View\n  onPress={[Function bound fn]}\n>\n  <Text>Press me</Text>\n</View>\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"debug-map-props-option",children:[(0,s.jsx)(n.code,{children:"mapProps"})," option",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#debug-map-props-option",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function debug({ mapProps: (props) => ({}) });\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You can use the ",(0,s.jsx)(n.code,{children:"mapProps"})," option to transform the props that will be printed :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"await render(<View style={{ backgroundColor: 'red' }} />);\nscreen.debug({ mapProps: ({ style, ...props }) => ({ props }) });\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This will log the rendered JSX without the ",(0,s.jsx)(n.code,{children:"style"})," props."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"children"})," prop cannot be filtered out so the following will print all rendered components with all props but ",(0,s.jsx)(n.code,{children:"children"})," filtered out."]}),"\n",(0,s.jsxs)(n.p,{children:["This option can be used to target specific props when debugging a query (for instance, keeping only the ",(0,s.jsx)(n.code,{children:"children"})," prop when debugging a ",(0,s.jsx)(n.code,{children:"getByText"})," query)."]}),"\n",(0,s.jsx)(n.p,{children:"You can also transform prop values so that they are more readable (e.g., flatten styles)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { StyleSheet } from 'react-native';\n\nscreen.debug({\n  mapProps: ({ style, ...props }) => ({ style: StyleSheet.flatten(style), ...props }),\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:"Or remove props that have little value when debugging tests, e.g. path prop for svgs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"screen.debug({ mapProps: ({ path, ...props }) => ({ ...props }) });\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"tojson",children:[(0,s.jsx)(n.code,{children:"toJSON"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#tojson",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function toJSON(): JsonElement | null;\n"})}),"\n",(0,s.jsx)(n.p,{children:"Get the rendered component JSON representation, e.g. for snapshot testing."}),"\n",(0,s.jsxs)(n.h3,{id:"container",children:[(0,s.jsx)(n.code,{children:"container"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#container",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const container: HostElement;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns a pseudo-element container whose children are the elements you asked to render. This is the root container element from ",(0,s.jsx)(n.a,{href:"https://github.com/mdjastrzebski/test-renderer",target:"_blank",rel:"noopener noreferrer",children:"Test Renderer"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"container"})," is safe to use and provides access to the entire rendered tree. It's useful when you need to query or manipulate the entire rendered output, similar to how ",(0,s.jsx)(n.code,{children:"container"})," works in ",(0,s.jsx)(n.a,{href:"https://testing-library.com/docs/react-testing-library/other#container-1",target:"_blank",rel:"noopener noreferrer",children:"React Testing Library"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"import { render, screen } from '@testing-library/react-native';\n\ntest('example', async () => {\n  await render(<MyComponent />);\n  // container contains the entire rendered tree\n  const container = screen.container;\n  expect(container).toBeTruthy();\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"root",children:[(0,s.jsx)(n.code,{children:"root"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#root",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const root: HostElement | null;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Returns the rendered root ",(0,s.jsx)(n.a,{href:"/docs/advanced/testing-env#host-and-composite-components",children:"host element"}),", or ",(0,s.jsx)(n.code,{children:"null"})," if nothing was rendered. This is the first child of the ",(0,s.jsx)(n.code,{children:"container"}),", which represents the actual root element you rendered."]}),"\n",(0,s.jsxs)(n.p,{children:["This API is primarily useful for component tests, as it allows you to access root host view without using ",(0,s.jsx)(n.code,{children:"*ByTestId"})," queries or similar methods."]}),"\n",(0,s.jsxs)(n.div,{className:"rspress-directive note",children:[(0,s.jsx)(n.div,{className:"rspress-directive-title",children:"NOTE"}),(0,s.jsxs)(n.div,{className:"rspress-directive-content",children:["\n",(0,s.jsxs)(n.p,{children:["In rare cases where your root element is a ",(0,s.jsx)(n.code,{children:"React.Fragment"})," with multiple children, the ",(0,s.jsx)(n.code,{children:"container"})," will have more than one child, and ",(0,s.jsx)(n.code,{children:"root"})," will return only the first one. In such cases, use ",(0,s.jsx)(n.code,{children:"container.children"})," to access all rendered elements."]}),"\n"]})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"import { render, screen } from '@testing-library/react-native';\n\ntest('example', async () => {\n  await render(\n    <View testID=\"root-view\">\n      <Text>Hello</Text>\n    </View>\n  );\n  // root is the View element you rendered\n  expect(screen.root.props.testID).toBe('root-view');\n});\n"})})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}let a=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["14.x%2Fdocs%2Fapi%2Fscreen.mdx"]={toc:[{text:"`...queries`",id:"queries",depth:3},{text:"Example",id:"example",depth:4},{text:"`rerender`",id:"rerender",depth:3},{text:"`unmount`",id:"unmount",depth:3},{text:"`debug`",id:"debug",depth:3},{text:"`message` option",id:"debug-message-option",depth:4},{text:"`mapProps` option",id:"debug-map-props-option",depth:4},{text:"`toJSON`",id:"tojson",depth:3},{text:"`container`",id:"container",depth:3},{text:"`root`",id:"root",depth:3}],title:"`screen` object",headingTitle:"`screen` object",frontmatter:{}}}}]);