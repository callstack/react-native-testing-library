"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["9498"],{1650:function(e,n,s){s.r(n),s.d(n,{default:()=>c});var r=s(5893),t=s(65);function i(e){let n=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",strong:"strong",ul:"ul",li:"li",h3:"h3",ol:"ol",pre:"pre"},(0,t.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"react-19--suspense-support",children:["React 19 & Suspense Support",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#react-19--suspense-support",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["React 19 introduced full support for React Suspense, ",(0,r.jsx)(n.a,{href:"https://react.dev/reference/react/use",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(n.code,{children:"React.use()"})}),", and other async rendering features to React Native ",(0,r.jsx)(n.a,{href:"https://github.com/facebook/react-native/releases/tag/v0.78.0",target:"_blank",rel:"noopener noreferrer",children:"0.78.0"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["When testing components that use these features, React requires the ",(0,r.jsx)(n.a,{href:"https://react.dev/reference/react/act",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(n.code,{children:"async act"})})," helper to handle async state updates. This means React Native Testing Library needs new async versions of its core APIs. These async APIs work with both React 18 and React 19."]}),"\n",(0,r.jsxs)(n.h2,{id:"new-async-apis",children:["New async APIs",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#new-async-apis",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"RNTL 14 introduces async versions of the core testing APIs to handle React 19's async rendering:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Rendering APIs:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/api/render#render",children:(0,r.jsx)(n.code,{children:"render"})})})," - now async by default (was ",(0,r.jsx)(n.code,{children:"renderAsync"})," in v13)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/api/screen#rerender",children:(0,r.jsx)(n.code,{children:"screen.rerender"})})})," - now async (returns ",(0,r.jsx)(n.code,{children:"Promise<void>"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/api/screen#unmount",children:(0,r.jsx)(n.code,{children:"screen.unmount"})})})," - now async (returns ",(0,r.jsx)(n.code,{children:"Promise<void>"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Event APIs:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/api/events/fire-event",children:(0,r.jsx)(n.code,{children:"fireEvent"})})})," - updated to be async by default."]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"apis-that-remain-unchanged",children:["APIs that remain unchanged",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#apis-that-remain-unchanged",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Many existing APIs continue to work without modification:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/api/queries",children:"Query methods"})}),": ",(0,r.jsx)(n.code,{children:"screen.getBy*"}),", ",(0,r.jsx)(n.code,{children:"screen.queryBy*"}),", ",(0,r.jsx)(n.code,{children:"screen.findBy*"})," - all work the same"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/api/events/user-event",children:"User Event API"})})," - already async, so no API changes needed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/api/jest-matchers",children:"Jest matchers"})})," - work with already-rendered output, so no changes required"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"what-changes-in-your-tests",children:["What changes in your tests",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#what-changes-in-your-tests",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"making-tests-async",children:["Making tests async",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#making-tests-async",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["The main change is using ",(0,r.jsx)(n.a,{href:"/docs/api/render#render",children:(0,r.jsx)(n.code,{children:"render"})})," which is now async by default, which requires:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Making your test function ",(0,r.jsx)(n.code,{children:"async"})]}),"\n",(0,r.jsxs)(n.li,{children:["Adding ",(0,r.jsx)(n.code,{children:"await"})," before ",(0,r.jsx)(n.code,{children:"render"})]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// Async approach (React 19 ready, default in v14)\ntest('my component', async () => {\n  await render(<MyComponent />);\n  expect(screen.getByText('Hello')).toBeOnTheScreen();\n});\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"when-to-use-async-apis",children:["When to use async APIs",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#when-to-use-async-apis",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"Use the async APIs when your components:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use React Suspense for data fetching or code splitting"}),"\n",(0,r.jsxs)(n.li,{children:["Call ",(0,r.jsx)(n.code,{children:"React.use()"})," for reading promises or context"]}),"\n",(0,r.jsxs)(n.li,{children:["Have async state updates that need proper ",(0,r.jsx)(n.code,{children:"act()"})," handling"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"migration-strategy",children:["Migration strategy",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#migration-strategy",children:"#"})]}),"\n",(0,r.jsxs)(n.h3,{id:"new-projects",children:["New projects",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#new-projects",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["Use the async-ready APIs (",(0,r.jsx)(n.code,{children:"render"}),", User Event, Jest Matchers, etc.) from the start. They work with both React 18 and React 19."]}),"\n",(0,r.jsxs)(n.h3,{id:"existing-projects",children:["Existing projects",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#existing-projects",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"You can migrate gradually:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Existing tests"})," should be migrated to use async ",(0,r.jsx)(n.code,{children:"render"})," (see migration guide)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"New tests"})," should use async ",(0,r.jsx)(n.code,{children:"render"})," (default in v14)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Tests with Suspense/",(0,r.jsx)(n.code,{children:"React.use()"})]})," must use async ",(0,r.jsx)(n.code,{children:"render"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"migration",children:["Migration",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#migration",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["See the ",(0,r.jsx)(n.a,{href:"/14.x/docs/migration/v14#render-async-default",children:"v14 migration guide"})," for detailed migration steps."]})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(i,{...e})}):i(e)}let c=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["14.x%2Fdocs%2Fguides%2Freact-19.mdx"]={toc:[{text:"New async APIs",id:"new-async-apis",depth:2},{text:"APIs that remain unchanged",id:"apis-that-remain-unchanged",depth:2},{text:"What changes in your tests",id:"what-changes-in-your-tests",depth:2},{text:"Making tests async",id:"making-tests-async",depth:3},{text:"When to use async APIs",id:"when-to-use-async-apis",depth:3},{text:"Migration strategy",id:"migration-strategy",depth:2},{text:"New projects",id:"new-projects",depth:3},{text:"Existing projects",id:"existing-projects",depth:3},{text:"Migration",id:"migration",depth:3}],title:"React 19 & Suspense Support",headingTitle:"React 19 & Suspense Support",frontmatter:{}}}}]);