"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["3241"],{9546:function(e,n,r){r.r(n),r.d(n,{default:()=>d});var s=r(5893),t=r(65);function a(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",h3:"h3",code:"code",strong:"strong",ul:"ul",li:"li",h4:"h4",pre:"pre",h5:"h5"},(0,t.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"migration-to-14x",children:["Migration to 14.x",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#migration-to-14x",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"This guide describes the migration to React Native Testing Library version 14 from version 13.x."}),"\n",(0,s.jsxs)(n.h2,{id:"breaking-changes",children:["Breaking changes",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#breaking-changes",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"test-renderer-replaces-react-test-renderer",children:["Test Renderer replaces React Test Renderer",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#test-renderer-replaces-react-test-renderer",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["In v14, React Native Testing Library now uses ",(0,s.jsx)(n.a,{href:"https://github.com/mdjastrzebski/test-renderer",target:"_blank",rel:"noopener noreferrer",children:"Test Renderer"})," instead of the deprecated ",(0,s.jsx)(n.code,{children:"react-test-renderer"})," package. Test Renderer is a modern, actively maintained alternative that provides better compatibility with React 19 and improved type safety."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What changed:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The underlying rendering engine has been switched from ",(0,s.jsx)(n.code,{children:"react-test-renderer"})," to ",(0,s.jsx)(n.code,{children:"test-renderer"})]}),"\n",(0,s.jsx)(n.li,{children:"This change is mostly internal and should not require code changes in most cases"}),"\n",(0,s.jsxs)(n.li,{children:["Type definitions have been updated to use ",(0,s.jsx)(n.code,{children:"HostElement"})," from Test Renderer instead of ",(0,s.jsx)(n.code,{children:"ReactTestInstance"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Migration:"})}),"\n",(0,s.jsxs)(n.h4,{id:"1-update-dependencies",children:["1. Update dependencies",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#1-update-dependencies",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["Remove ",(0,s.jsx)(n.code,{children:"react-test-renderer"})," and its type definitions from your dev dependencies, and add ",(0,s.jsx)(n.code,{children:"test-renderer"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Using npm\nnpm uninstall react-test-renderer @types/react-test-renderer\nnpm install -D test-renderer@^0.10.0\n\n# Using yarn\nyarn remove react-test-renderer @types/react-test-renderer\nyarn add -D test-renderer@^0.10.0\n\n# Using pnpm\npnpm remove react-test-renderer @types/react-test-renderer\npnpm add -D test-renderer@^0.10.0\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"2-update-type-imports-if-needed",children:["2. Update type imports (if needed)",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#2-update-type-imports-if-needed",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["If you were directly importing types from ",(0,s.jsx)(n.code,{children:"react-test-renderer"}),", you may need to update your imports:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Before (v13)\nimport type { ReactTestInstance } from 'react-test-renderer';\n\n// After (v14)\nimport type { HostElement } from 'test-renderer';\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," Most users won't need to update type imports, as React Native Testing Library now exports the necessary types directly."]}),"\n",(0,s.jsxs)(n.p,{children:["For more details, see the ",(0,s.jsx)(n.a,{href:"https://github.com/mdjastrzebski/test-renderer",target:"_blank",rel:"noopener noreferrer",children:"Test Renderer documentation"}),"."]}),"\n",(0,s.jsxs)(n.h3,{id:"container-api-reintroduced",children:[(0,s.jsx)(n.code,{children:"container"})," API reintroduced",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#container-api-reintroduced",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["In v14, the ",(0,s.jsx)(n.code,{children:"container"})," API has been reintroduced and is now safe to use. Previously, ",(0,s.jsx)(n.code,{children:"container"})," was renamed to ",(0,s.jsx)(n.code,{children:"UNSAFE_root"})," in v12 due to behavioral differences from React Testing Library's ",(0,s.jsx)(n.code,{children:"container"}),". In v14, ",(0,s.jsx)(n.code,{children:"container"})," now returns a pseudo-element container whose children are the elements you asked to render, making it safe and consistent with React Testing Library's behavior."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What changed:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"screen.container"})," is now available and safe to use"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"container"})," returns a pseudo-element container from Test Renderer"]}),"\n",(0,s.jsx)(n.li,{children:"The container's children are the elements you rendered"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"UNSAFE_root"})," has been removed"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Before (v13):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { render, screen } from '@testing-library/react-native';\n\nit('should access root', () => {\n  render(<MyComponent />);\n  // UNSAFE_root was the only way to access the container\n  const root = screen.UNSAFE_root;\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"After (v14):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { render, screen } from '@testing-library/react-native';\n\nit('should access container', async () => {\n  await render(<MyComponent />);\n  // container is now safe and available\n  const container = screen.container;\n  // root is the first child of container\n  const root = screen.root;\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Migration:"})}),"\n",(0,s.jsxs)(n.p,{children:["If you were using ",(0,s.jsx)(n.code,{children:"UNSAFE_root"}),", replace it with ",(0,s.jsx)(n.code,{children:"container"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Before\nconst root = screen.UNSAFE_root;\n\n// After\nconst container = screen.container;\n// Or use screen.root if you need the actual root element\nconst root = screen.root;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For more details, see the ",(0,s.jsxs)(n.a,{href:"/docs/api/screen#container",children:[(0,s.jsx)(n.code,{children:"screen"})," API documentation"]}),"."]}),"\n",(0,s.jsxs)(n.h3,{id:"render-async-default",children:[(0,s.jsx)(n.code,{children:"render"})," is now async by default",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#render-async-default",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["In v14, ",(0,s.jsx)(n.code,{children:"render"})," is now async by default and returns a Promise. The previous synchronous ",(0,s.jsx)(n.code,{children:"render"})," function has been renamed to ",(0,s.jsx)(n.code,{children:"unsafe_renderSync"}),". This change makes it compatible with React 19, React Suspense, and ",(0,s.jsx)(n.code,{children:"React.use()"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Before (v13):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { render, screen } from '@testing-library/react-native';\n\nit('should render component', () => {\n  render(<MyComponent />);\n  expect(screen.getByText('Hello')).toBeOnTheScreen();\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"After (v14):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { render, screen } from '@testing-library/react-native';\n\nit('should render component', async () => {\n  await render(<MyComponent />);\n  expect(screen.getByText('Hello')).toBeOnTheScreen();\n});\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"migration-path",children:["Migration path",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#migration-path",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["To ease migration, we provide ",(0,s.jsx)(n.code,{children:"unsafe_renderSync"})," which maintains the same synchronous behavior as v13. This allows you to migrate gradually."]}),"\n",(0,s.jsxs)(n.h5,{id:"unsafe-render-sync",children:[(0,s.jsx)(n.code,{children:"unsafe_renderSync"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#unsafe-render-sync",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function unsafe_renderSync(\n  component: React.Element<any>,\n  options?: RenderSyncOptions\n): RenderSyncResult;\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"⚠️ Deprecated"}),": This function is provided for migration purposes only. Use async ",(0,s.jsx)(n.code,{children:"render"})," instead."]}),"\n",(0,s.jsxs)(n.p,{children:["The synchronous version of ",(0,s.jsx)(n.code,{children:"render"})," that returns immediately without awaiting React updates. This maintains backward compatibility with v13 tests but is not recommended for new code."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Old v13 code (still works but deprecated)\nimport { unsafe_renderSync } from '@testing-library/react-native';\n\nit('should render component', () => {\n  unsafe_renderSync(<MyComponent />);\n  expect(screen.getByText('Hello')).toBeOnTheScreen();\n});\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"step-by-step-migration-guide",children:["Step-by-step migration guide",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#step-by-step-migration-guide",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["To migrate from ",(0,s.jsx)(n.code,{children:"unsafe_renderSync"})," to ",(0,s.jsx)(n.code,{children:"render"}),":"]}),"\n",(0,s.jsxs)(n.h5,{id:"1-add-async-to-your-test-function",children:["1. Add ",(0,s.jsx)(n.code,{children:"async"})," to your test function",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#1-add-async-to-your-test-function",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Before\nit('should render component', () => {\n\n// After\nit('should render component', async () => {\n"})}),"\n",(0,s.jsxs)(n.h5,{id:"2-await-render",children:["2. Await ",(0,s.jsx)(n.code,{children:"render"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#2-await-render",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Before\nrender(<MyComponent />);\n\n// After\nawait render(<MyComponent />);\n"})}),"\n",(0,s.jsxs)(n.h5,{id:"3-update-rerender-calls-to-await",children:["3. Update ",(0,s.jsx)(n.code,{children:"rerender"})," calls to await",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#3-update-rerender-calls-to-await",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Before\nscreen.rerender(<MyComponent />);\n\n// After\nawait screen.rerender(<MyComponent />);\n"})}),"\n",(0,s.jsxs)(n.h5,{id:"4-update-unmount-calls-to-await",children:["4. Update ",(0,s.jsx)(n.code,{children:"unmount"})," calls to await",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#4-update-unmount-calls-to-await",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Before\nscreen.unmount();\n\n// After\nawait screen.unmount();\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"complete-example",children:["Complete example",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#complete-example",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Before (v13):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { render, screen } from '@testing-library/react-native';\n\nit('should update component', () => {\n  render(<Counter initialCount={0} />);\n  expect(screen.getByText('Count: 0')).toBeOnTheScreen();\n\n  screen.rerender(<Counter initialCount={5} />);\n  expect(screen.getByText('Count: 5')).toBeOnTheScreen();\n\n  screen.unmount();\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"After (v14):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { render, screen } from '@testing-library/react-native';\n\nit('should update component', async () => {\n  await render(<Counter initialCount={0} />);\n  expect(screen.getByText('Count: 0')).toBeOnTheScreen();\n\n  await screen.rerender(<Counter initialCount={5} />);\n  expect(screen.getByText('Count: 5')).toBeOnTheScreen();\n\n  await screen.unmount();\n});\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"benefits-of-async-render",children:["Benefits of async ",(0,s.jsx)(n.code,{children:"render"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#benefits-of-async-render",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"React 19 compatibility"}),": Works seamlessly with React 19's async features"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Suspense support"}),": Properly handles React Suspense boundaries and ",(0,s.jsx)(n.code,{children:"React.use()"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Better timing"}),": Ensures all pending React updates are executed before assertions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Future-proof"}),": Aligns with React's direction toward async rendering"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["For more details, see the ",(0,s.jsxs)(n.a,{href:"/docs/api/render",children:[(0,s.jsx)(n.code,{children:"render"})," API documentation"]}),"."]}),"\n",(0,s.jsxs)(n.h3,{id:"renderhook-is-now-async-by-default",children:[(0,s.jsx)(n.code,{children:"renderHook"})," is now async by default",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#renderhook-is-now-async-by-default",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["In v14, ",(0,s.jsx)(n.code,{children:"renderHook"})," is now async by default and returns a Promise. This change makes it compatible with React 19, React Suspense, and ",(0,s.jsx)(n.code,{children:"React.use()"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Before (v13):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { renderHook } from '@testing-library/react-native';\n\nit('should test hook', () => {\n  const { result, rerender } = renderHook(() => useMyHook());\n\n  rerender(newProps);\n  unmount();\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"After (v14):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { renderHook } from '@testing-library/react-native';\n\nit('should test hook', async () => {\n  const { result, rerender } = await renderHook(() => useMyHook());\n\n  await rerender(newProps);\n  await unmount();\n});\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"migration-path-1",children:["Migration path",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#migration-path-1",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["To ease migration, we provide ",(0,s.jsx)(n.code,{children:"unsafe_renderHookSync"})," which maintains the same synchronous behavior as v13. This allows you to migrate gradually."]}),"\n",(0,s.jsxs)(n.h5,{id:"unsafe-render-hook-sync",children:[(0,s.jsx)(n.code,{children:"unsafe_renderHookSync"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#unsafe-render-hook-sync",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function unsafe_renderHookSync<Result, Props>(\n  hookFn: (props?: Props) => Result,\n  options?: RenderHookOptions<Props>\n): RenderHookSyncResult<Result, Props>;\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"⚠️ Deprecated"}),": This function is provided for migration purposes only. Use async ",(0,s.jsx)(n.code,{children:"renderHook"})," instead."]}),"\n",(0,s.jsxs)(n.p,{children:["The synchronous version of ",(0,s.jsx)(n.code,{children:"renderHook"})," that returns immediately without awaiting React updates. This maintains backward compatibility with v13 tests but is not recommended for new code."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Old v13 code (still works but deprecated)\nimport { unsafe_renderHookSync } from '@testing-library/react-native';\n\nit('should increment count', () => {\n  const { result, rerender } = unsafe_renderHookSync(() => useCount());\n\n  expect(result.current.count).toBe(0);\n  act(() => {\n    result.current.increment();\n  });\n  expect(result.current.count).toBe(1);\n\n  rerender();\n});\n"})}),"\n",(0,s.jsxs)(n.h5,{id:"result-types",children:["Result types",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#result-types",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v13 (deprecated):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface RenderHookSyncResult<Result, Props> {\n  result: { current: Result };\n  rerender: (props: Props) => void;\n  unmount: () => void;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v14 (default):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface RenderHookResult<Result, Props> {\n  result: { current: Result };\n  rerender: (props: Props) => Promise<void>;\n  unmount: () => Promise<void>;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),": Both ",(0,s.jsx)(n.code,{children:"RenderHookSyncResult"})," and ",(0,s.jsx)(n.code,{children:"RenderHookResult"})," use ",(0,s.jsx)(n.code,{children:"rerender"})," and ",(0,s.jsx)(n.code,{children:"unmount"})," methods. The difference is that ",(0,s.jsx)(n.code,{children:"RenderHookSyncResult"})," methods are synchronous (return ",(0,s.jsx)(n.code,{children:"void"}),"), while ",(0,s.jsx)(n.code,{children:"RenderHookResult"})," methods are async (return ",(0,s.jsx)(n.code,{children:"Promise<void>"}),")."]}),"\n",(0,s.jsxs)(n.h4,{id:"step-by-step-migration-guide-1",children:["Step-by-step migration guide",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#step-by-step-migration-guide-1",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["To migrate from ",(0,s.jsx)(n.code,{children:"unsafe_renderHookSync"})," to ",(0,s.jsx)(n.code,{children:"renderHook"}),":"]}),"\n",(0,s.jsxs)(n.h5,{id:"1-add-async-to-your-test-function-1",children:["1. Add ",(0,s.jsx)(n.code,{children:"async"})," to your test function",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#1-add-async-to-your-test-function-1",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Before\nit('should test hook', () => {\n\n// After\nit('should test hook', async () => {\n"})}),"\n",(0,s.jsxs)(n.h5,{id:"2-await-renderhook",children:["2. Await ",(0,s.jsx)(n.code,{children:"renderHook"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#2-await-renderhook",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Before\nconst { result } = unsafe_renderHookSync(() => useMyHook());\n\n// After\nconst { result } = await renderHook(() => useMyHook());\n"})}),"\n",(0,s.jsxs)(n.h5,{id:"3-update-rerender-calls-to-await-1",children:["3. Update ",(0,s.jsx)(n.code,{children:"rerender"})," calls to await",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#3-update-rerender-calls-to-await-1",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Before\nrerender(newProps);\n\n// After\nawait rerender(newProps);\n"})}),"\n",(0,s.jsxs)(n.h5,{id:"4-update-unmount-calls-to-await-1",children:["4. Update ",(0,s.jsx)(n.code,{children:"unmount"})," calls to await",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#4-update-unmount-calls-to-await-1",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Before\nunmount();\n\n// After\nawait unmount();\n"})}),"\n",(0,s.jsxs)(n.h5,{id:"5-update-act-calls-to-use-async-act",children:["5. Update ",(0,s.jsx)(n.code,{children:"act"})," calls to use async ",(0,s.jsx)(n.code,{children:"act"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#5-update-act-calls-to-use-async-act",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Before\nact(() => {\n  result.current.doSomething();\n});\n\n// After\nawait act(async () => {\n  result.current.doSomething();\n});\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"complete-example-1",children:["Complete example",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#complete-example-1",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Before (v13):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { renderHook, act } from '@testing-library/react-native';\n\nit('should increment count', () => {\n  const { result, rerender } = renderHook((initialCount: number) => useCount(initialCount), {\n    initialProps: 1,\n  });\n\n  expect(result.current.count).toBe(1);\n\n  act(() => {\n    result.current.increment();\n  });\n\n  expect(result.current.count).toBe(2);\n  rerender(5);\n  expect(result.current.count).toBe(5);\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"After (v14):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { renderHook, act } from '@testing-library/react-native';\n\nit('should increment count', async () => {\n  const { result, rerender } = await renderHook((initialCount: number) => useCount(initialCount), {\n    initialProps: 1,\n  });\n\n  expect(result.current.count).toBe(1);\n\n  await act(async () => {\n    result.current.increment();\n  });\n\n  expect(result.current.count).toBe(2);\n  await rerender(5);\n  expect(result.current.count).toBe(5);\n});\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"benefits-of-async-renderhook",children:["Benefits of async ",(0,s.jsx)(n.code,{children:"renderHook"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#benefits-of-async-renderhook",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"React 19 compatibility"}),": Works seamlessly with React 19's async features"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Suspense support"}),": Properly handles React Suspense boundaries and ",(0,s.jsx)(n.code,{children:"React.use()"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Better timing"}),": Ensures all pending React updates are executed before assertions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Future-proof"}),": Aligns with React's direction toward async rendering"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["For more details, see the ",(0,s.jsxs)(n.a,{href:"/docs/api/misc/render-hook",children:[(0,s.jsx)(n.code,{children:"renderHook"})," API documentation"]}),"."]}),"\n",(0,s.jsxs)(n.h3,{id:"fireevent-is-now-async-by-default",children:[(0,s.jsx)(n.code,{children:"fireEvent"})," is now async by default",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#fireevent-is-now-async-by-default",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["In v14, ",(0,s.jsx)(n.code,{children:"fireEvent"})," and its helpers (",(0,s.jsx)(n.code,{children:"press"}),", ",(0,s.jsx)(n.code,{children:"changeText"}),", ",(0,s.jsx)(n.code,{children:"scroll"}),") are now async by default and return a Promise. This change makes it compatible with React 19, React Suspense, and ",(0,s.jsx)(n.code,{children:"React.use()"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Before (v13):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { fireEvent, screen } from '@testing-library/react-native';\n\nit('should press button', () => {\n  render(<MyComponent />);\n  fireEvent.press(screen.getByText('Press me'));\n  expect(onPress).toHaveBeenCalled();\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"After (v14):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { fireEvent, screen } from '@testing-library/react-native';\n\nit('should press button', async () => {\n  render(<MyComponent />);\n  await fireEvent.press(screen.getByText('Press me'));\n  expect(onPress).toHaveBeenCalled();\n});\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"migration-path-2",children:["Migration path",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#migration-path-2",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["To ease migration, we provide ",(0,s.jsx)(n.code,{children:"unsafe_fireEventSync"})," which maintains the same synchronous behavior as v13. This allows you to migrate gradually."]}),"\n",(0,s.jsxs)(n.h5,{id:"unsafe-fire-event-sync",children:[(0,s.jsx)(n.code,{children:"unsafe_fireEventSync"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#unsafe-fire-event-sync",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function unsafe_fireEventSync(element: HostElement, eventName: string, ...data: unknown[]): void;\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"⚠️ Deprecated"}),": This function is provided for migration purposes only. Use async ",(0,s.jsx)(n.code,{children:"fireEvent"})," instead."]}),"\n",(0,s.jsxs)(n.p,{children:["The synchronous version of ",(0,s.jsx)(n.code,{children:"fireEvent"})," that returns immediately without awaiting React updates. This maintains backward compatibility with v13 tests but is not recommended for new code."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Old v13 code (still works but deprecated)\nimport { unsafe_fireEventSync } from '@testing-library/react-native';\n\nit('should press button', () => {\n  render(<MyComponent />);\n  unsafe_fireEventSync.press(screen.getByText('Press me'));\n  expect(onPress).toHaveBeenCalled();\n});\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"text-string-validation-now-enforced-by-default",children:["Text string validation now enforced by default",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#text-string-validation-now-enforced-by-default",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["In v14, Test Renderer automatically enforces React Native's requirement that text strings must be rendered within a ",(0,s.jsx)(n.code,{children:"<Text>"})," component. This means the ",(0,s.jsx)(n.code,{children:"unstable_validateStringsRenderedWithinText"})," option has been removed from ",(0,s.jsx)(n.code,{children:"RenderOptions"}),", as this validation is now always enabled."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What changed:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Text string validation is now always enabled and cannot be disabled"}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"unstable_validateStringsRenderedWithinText"})," option has been removed"]}),"\n",(0,s.jsxs)(n.li,{children:["Tests will now throw ",(0,s.jsx)(n.code,{children:"Invariant Violation: Text strings must be rendered within a <Text> component"})," errors when attempting to render strings outside of ",(0,s.jsx)(n.code,{children:"<Text>"})," components, matching React Native's runtime behavior"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Migration:"})}),"\n",(0,s.jsxs)(n.p,{children:["If you were using ",(0,s.jsx)(n.code,{children:"unstable_validateStringsRenderedWithinText: true"})," in your render options, you can simply remove this option as the validation is now always enabled:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Before (v13)\nawait render(<MyComponent />, {\n  unstable_validateStringsRenderedWithinText: true,\n});\n\n// After (v14)\nawait render(<MyComponent />);\n// Validation is now always enabled\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If you were relying on the previous behavior where strings could be rendered outside of ",(0,s.jsx)(n.code,{children:"<Text>"})," components, you'll need to fix your components to wrap strings in ",(0,s.jsx)(n.code,{children:"<Text>"})," components, as this matches React Native's actual runtime behavior."]}),"\n",(0,s.jsxs)(n.h3,{id:"act-is-now-async-by-default",children:[(0,s.jsx)(n.code,{children:"act"})," is now async by default",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#act-is-now-async-by-default",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["In v14, ",(0,s.jsx)(n.code,{children:"act"})," is now async by default and always returns a Promise. The previous synchronous ",(0,s.jsx)(n.code,{children:"act"})," function has been renamed to ",(0,s.jsx)(n.code,{children:"unsafe_act"}),". This change makes it compatible with React 19, React Suspense, and ",(0,s.jsx)(n.code,{children:"React.use()"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What changed:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"act"})," now always returns a ",(0,s.jsx)(n.code,{children:"Promise<T>"})," instead of ",(0,s.jsx)(n.code,{children:"T | Thenable<T>"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"unsafe_act"})," is available for the old behavior (direct React.act wrapper)"]}),"\n",(0,s.jsxs)(n.li,{children:["Both ",(0,s.jsx)(n.code,{children:"act"})," and ",(0,s.jsx)(n.code,{children:"unsafe_act"})," are now named exports (no default export)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Before (v13):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import act from '@testing-library/react-native';\n\nit('should update state', () => {\n  act(() => {\n    // Synchronous callback\n    setState('new value');\n  });\n  // act could return synchronously or a thenable\n  expect(state).toBe('new value');\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"After (v14):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { act } from '@testing-library/react-native';\n\nit('should update state', async () => {\n  await act(async () => {\n    // Callback can be sync or async\n    setState('new value');\n  });\n  // act always returns a Promise\n  expect(state).toBe('new value');\n});\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"migration-path-3",children:["Migration path",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#migration-path-3",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["To ease migration, we provide ",(0,s.jsx)(n.code,{children:"unsafe_act"})," which maintains the same behavior as v13. This allows you to migrate gradually."]}),"\n",(0,s.jsxs)(n.h5,{id:"unsafe-act",children:[(0,s.jsx)(n.code,{children:"unsafe_act"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#unsafe-act",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function unsafe_act<T>(callback: () => T | Promise<T>): T | Thenable<T>;\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"⚠️ Deprecated"}),": This function is provided for migration purposes only. Use async ",(0,s.jsx)(n.code,{children:"act"})," instead."]}),"\n",(0,s.jsxs)(n.p,{children:["The synchronous version of ",(0,s.jsx)(n.code,{children:"act"})," that returns immediately for sync callbacks or a thenable for async callbacks. This maintains backward compatibility with v13 tests but is not recommended for new code."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Old v13 code (still works but deprecated)\nimport { unsafe_act } from '@testing-library/react-native';\n\nit('should update state', () => {\n  unsafe_act(() => {\n    setState('new value');\n  });\n  expect(state).toBe('new value');\n});\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"step-by-step-migration-guide-2",children:["Step-by-step migration guide",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#step-by-step-migration-guide-2",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["To migrate from ",(0,s.jsx)(n.code,{children:"unsafe_act"})," to ",(0,s.jsx)(n.code,{children:"act"}),":"]}),"\n",(0,s.jsxs)(n.h5,{id:"1-update-import-statement",children:["1. Update import statement",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#1-update-import-statement",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Before\nimport act from '@testing-library/react-native';\n\n// After\nimport { act } from '@testing-library/react-native';\n"})}),"\n",(0,s.jsxs)(n.h5,{id:"2-add-async-to-your-test-function",children:["2. Add ",(0,s.jsx)(n.code,{children:"async"})," to your test function",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#2-add-async-to-your-test-function",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Before\nit('should update state', () => {\n\n// After\nit('should update state', async () => {\n"})}),"\n",(0,s.jsxs)(n.h5,{id:"3-await-act-calls",children:["3. Await ",(0,s.jsx)(n.code,{children:"act"})," calls",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#3-await-act-calls",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Before\nact(() => {\n  setState('new value');\n});\n\n// After\nawait act(async () => {\n  setState('new value');\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),": Even if your callback is synchronous, you should still use ",(0,s.jsx)(n.code,{children:"await act(async () => ...)"})," as ",(0,s.jsx)(n.code,{children:"act"})," now always returns a Promise."]}),"\n",(0,s.jsxs)(n.h4,{id:"complete-example-2",children:["Complete example",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#complete-example-2",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Before (v13):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import act from '@testing-library/react-native';\n\nit('should update state synchronously', () => {\n  act(() => {\n    setState('new value');\n  });\n  expect(state).toBe('new value');\n});\n\nit('should update state asynchronously', () => {\n  act(async () => {\n    await Promise.resolve();\n    setState('new value');\n  }).then(() => {\n    expect(state).toBe('new value');\n  });\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"After (v14):"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { act } from '@testing-library/react-native';\n\nit('should update state synchronously', async () => {\n  await act(async () => {\n    setState('new value');\n  });\n  expect(state).toBe('new value');\n});\n\nit('should update state asynchronously', async () => {\n  await act(async () => {\n    await Promise.resolve();\n    setState('new value');\n  });\n  expect(state).toBe('new value');\n});\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"benefits-of-async-act",children:["Benefits of async ",(0,s.jsx)(n.code,{children:"act"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#benefits-of-async-act",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"React 19 compatibility"}),": Works seamlessly with React 19's async features"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Suspense support"}),": Properly handles React Suspense boundaries and ",(0,s.jsx)(n.code,{children:"React.use()"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Consistent API"}),": Always returns a Promise, making the API more predictable"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Future-proof"}),": Aligns with React's direction toward async rendering"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["For more details, see the ",(0,s.jsxs)(n.a,{href:"/docs/api/misc/other#act",children:[(0,s.jsx)(n.code,{children:"act"})," API documentation"]}),"."]})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}let d=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["14.x%2Fdocs%2Fmigration%2Fv14.mdx"]={toc:[{text:"Breaking changes",id:"breaking-changes",depth:2},{text:"Test Renderer replaces React Test Renderer",id:"test-renderer-replaces-react-test-renderer",depth:3},{text:"1. Update dependencies",id:"1-update-dependencies",depth:4},{text:"2. Update type imports (if needed)",id:"2-update-type-imports-if-needed",depth:4},{text:"`container` API reintroduced",id:"container-api-reintroduced",depth:3},{text:"`render` is now async by default",id:"render-async-default",depth:3},{text:"Migration path",id:"migration-path",depth:4},{text:"Step-by-step migration guide",id:"step-by-step-migration-guide",depth:4},{text:"Complete example",id:"complete-example",depth:4},{text:"Benefits of async `render`",id:"benefits-of-async-render",depth:4},{text:"`renderHook` is now async by default",id:"renderhook-is-now-async-by-default",depth:3},{text:"Migration path",id:"migration-path-1",depth:4},{text:"Step-by-step migration guide",id:"step-by-step-migration-guide-1",depth:4},{text:"Complete example",id:"complete-example-1",depth:4},{text:"Benefits of async `renderHook`",id:"benefits-of-async-renderhook",depth:4},{text:"`fireEvent` is now async by default",id:"fireevent-is-now-async-by-default",depth:3},{text:"Migration path",id:"migration-path-2",depth:4},{text:"Text string validation now enforced by default",id:"text-string-validation-now-enforced-by-default",depth:3},{text:"`act` is now async by default",id:"act-is-now-async-by-default",depth:3},{text:"Migration path",id:"migration-path-3",depth:4},{text:"Step-by-step migration guide",id:"step-by-step-migration-guide-2",depth:4},{text:"Complete example",id:"complete-example-2",depth:4},{text:"Benefits of async `act`",id:"benefits-of-async-act",depth:4}],title:"Migration to 14.x",headingTitle:"Migration to 14.x",frontmatter:{}}}}]);